<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Annual Inspections</title>
<style>
  body { font-family: Arial, sans-serif; background: #0f172a; color: #fff; margin: 0; padding: 0; }
  header { background: #1e293b; padding: 10px; text-align: center; font-size: 20px; }
  .container { padding: 15px; }
  select, input, textarea { width: 100%; padding: 8px; margin: 5px 0; border-radius: 6px; border: 1px solid #475569; background: #1e293b; color: white; }
  button { padding: 10px; border: none; border-radius: 6px; margin: 5px 2px; cursor: pointer; font-weight: bold; }
  .save-btn { background: #38bdf8; color: black; }
  .home-btn { background: #475569; color: white; }
  .section { border: 1px solid #334155; padding: 10px; border-radius: 6px; margin-bottom: 10px; background: #1e293b; }
  h3 { margin: 5px 0; }
  label { display: block; margin-top: 5px; }
</style>
</head>
<body>

<header>
  Annual Inspections
</header>

<div class="container">

  <label for="attendant">Attendant</label>
  <select id="attendant">
    <option value="T. Cherry">T. Cherry</option>
    <option value="T. Ressler">T. Ressler</option>
  </select>

  <label for="wellType">Well Type</label>
  <select id="wellType" onchange="populateWells()">
    <option value="Production">Production Wells</option>
    <option value="OBS">OBS Wells</option>
  </select>

  <label for="field">Field</label>
  <select id="field" onchange="populateWells()">
    <option value="">Select Field</option>
    <option value="Dixon">Dixon</option>
    <option value="Simpson Chapel">Simpson Chapel</option>
    <option value="Mineral City">Mineral City</option>
  </select>

  <div id="wellsContainer"></div>

  <button class="save-btn" onclick="saveBatch()">Save All Visible (Combined)</button>
  <button class="home-btn" onclick="window.location.href='index.html'">Home</button>
</div>

<script>
const wells = {
  Production: {
    "Dixon": ["Evans 7","Evans 8","Evans 3","Evans 10","Evans 5","Evans 4-H","Evans 6","Cory 8","Cory 4","Cory 2","Cory 7","Cory 3","Cory 6","Cory 5","Cory 1"],
    "Simpson Chapel": ["Blaker 1","Emery 2","Emery 1","Crays 8","Crays 5","Crays 4","Crays 3","Crays 7","Crays 2","Crays 6","Royal 6","Royal 5","Royal 4","Royal 7","Royal 1"],
    "Mineral City": ["Rollison 4","Rollison 1","Rollison 2","G. Axe 6","Haines 4","Haines 1","Haines 2","Haines 3","G. Axe 1","Allen 1","G. Axe 2","G. Axe 4","G. Axe 5","G. Axe 3","J. Axe 1"]
  },
  OBS: {
    "Dixon": ["Evans 1","Evans 2","Evans 9","Hendren 1","Mount 1","Dowden 1"],
    "Simpson Chapel": ["Blackmore 3","RH Stone 1","Royal 2","Royal 3","Rollison 5","Royal 9","S Blackmore 1","Blackmore 4","Royal 8"],
    "Mineral City": ["Horning 1","G Axe 7","Boruff 1","Floyd 1","Rollison 5","Foster 1"]
  }
};

function populateWells() {
  const type = document.getElementById('wellType').value;
  const field = document.getElementById('field').value;
  const container = document.getElementById('wellsContainer');
  container.innerHTML = '';

  if (!type || !field) return;

  wells[type][field].forEach(well => {
    container.innerHTML += `
      <div class="section">
        <h3>${well}</h3>
        <label>Surface Pressure (PSI)</label>
        <input type="number" id="${well}-surface" />

        <label>Casing Pressure (PSI)</label>
        <input type="number" id="${well}-casing" />

        <label>Valve Checks</label>
        ${["Master","Tubing","Annulus","Crossover","Tail","Wing"].map(v => `
          <label>${v} Valve</label>
          <select id="${well}-valve-${v}">
            <option value="Yes">Yes</option>
            <option value="No">No</option>
          </select>
        `).join('')}

        <label>Leak Checks (default No)</label>
        ${["Master","Tubing","Annulus","Crossover","Tail","Wing"].map(v => `
          <label>${v} Leak</label>
          <select id="${well}-leak-${v}">
            <option value="No" selected>No</option>
            <option value="Yes">Yes</option>
          </select>
        `).join('')}

        <label>Notes</label>
        <textarea id="${well}-notes"></textarea>
      </div>
    `;
  });
}

function saveBatch() {
  const type = document.getElementById('wellType').value;
  const field = document.getElementById('field').value;
  const attendant = document.getElementById('attendant').value;
  const date = new Date().toISOString().split('T')[0];
  const entries = [];

  wells[type][field].forEach(well => {
    const surface = document.getElementById(`${well}-surface`).value;
    const casing = document.getElementById(`${well}-casing`).value;
    const valves = {};
    const leaks = {};

    ["Master","Tubing","Annulus","Crossover","Tail","Wing"].forEach(v => {
      valves[v] = document.getElementById(`${well}-valve-${v}`).value;
      leaks[v] = document.getElementById(`${well}-leak-${v}`).value;
    });

    entries.push({
      recordType: "Annual Inspection",
      date,
      attendant,
      field,
      well,
      wellType: type,
      surfacePSI: surface,
      casingPSI: casing,
      valves,
      leaks,
      notes: document.getElementById(`${well}-notes`).value
    });
  });

  const batch = {
    recordType: "Annual Inspection",
    date,
    attendant,
    field,
    wellType: type,
    entries
  };

  let allBatches = JSON.parse(localStorage.getItem('annualInspectionBatches') || '[]');
  allBatches.push(batch);
  localStorage.setItem('annualInspectionBatches', JSON.stringify(allBatches));
  alert("Annual inspection batch saved!");
}
</script>

</body>
</html>
