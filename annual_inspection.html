<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Annual Inspection - FieldFlow</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }
    h1 {
      text-align: center;
    }
    select, input, textarea, button {
      display: block;
      margin: 10px 0;
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
    }
    .well-entry {
      background: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 15px;
    }
    .valve-buttons button {
      font-size: 1.5em;
      margin-right: 10px;
      padding: 5px 10px;
      background: #eee;
      border: 2px solid transparent;
      border-radius: 5px;
      cursor: pointer;
    }
    .valve-buttons button.active {
      border-color: #007bff;
      background-color: #d9ecff;
    }
    .home-btn {
      background: #333;
      color: #fff;
      border: none;
      padding: 10px 20px;
      margin-top: 20px;
      cursor: pointer;
      width: auto;
    }
  </style>
</head>
<body>

  <h1>Annual Inspection</h1>

  <label for="fieldSelect">Select Field:</label>
  <select id="fieldSelect" onchange="populateWells()">
    <option value="">-- Select Field --</option>
    <option value="Dixon">Dixon</option>
    <option value="Simpson Chapel">Simpson Chapel</option>
    <option value="Mineral City">Mineral City</option>
  </select>

  <div id="wellContainer"></div>

  <button onclick="submitForm()">Submit All</button>
  <button class="home-btn" onclick="location.href='index.html'">üè† Home</button>

  <script>
    const fieldWells = {
      "Dixon": ["Evans 10", "Evans 5", "Evan 4-H", "Cory 8", "Cory 4", "Cory 2", "Cory 7", "Cory 3", "Cory 6", "Cory 5", "Cory 1"],
      "Simpson Chapel": ["Blaker 1", "Emery 2", "Emery 1", "Crays 8", "Crays 5", "Crays 4", "Crays 3", "Crays 7", "Crays 2", "Crays 6", "Royal 6", "Royal 5", "Royal 4", "Royal 7", "Royal 1"],
      "Mineral City": ["Haines 1", "Haines 2", "Haines 3", "Haines 4", "G. Axe 1", "G. Axe 2", "G. Axe 3", "G. Axe 4", "G. Axe 5", "G. Axe 6", "J. Axe 1", "Rollison 1", "Rollison 2", "Rollison 3", "Rollison 4", "Headley 1"]
    };

    function populateWells() {
      const field = document.getElementById('fieldSelect').value;
      const container = document.getElementById('wellContainer');
      container.innerHTML = '';

      if (!fieldWells[field]) return;

      fieldWells[field].forEach(well => {
        const div = document.createElement('div');
        div.className = 'well-entry';
        div.innerHTML = `
          <h3>${well}</h3>
          <label>Date:</label>
          <input type="date" name="date" value="${new Date().toISOString().split('T')[0]}">

          <label>Time:</label>
          <input type="time" name="time" value="${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}">

          <label>Upstream Pressure (PSI):</label>
          <input type="number" step="any" name="upstream">

          <label>Downstream Pressure (PSI):</label>
          <input type="number" step="any" name="downstream">

          <label>Valve Check:</label>
          <div class="valve-buttons">
            <button type="button" onclick="setValveStatus(this, 'Pass')">‚úÖ</button>
            <button type="button" onclick="setValveStatus(this, 'Fail')">‚ùå</button>
            <input type="hidden" name="valve_status" value="">
          </div>

          <label>Leak Check:</label>
          <select name="leak" onchange="toggleLeakDetails(this)">
            <option value="None">None</option>
            <option value="Yes">Yes</option>
          </select>

          <div class="leak-details" style="display:none;">
            <label>Leak Type:</label>
            <select name="leak_type">
              <option value="Internal">Internal</option>
              <option value="External">External</option>
              <option value="Both">Both</option>
            </select>
          </div>

          <label>Notes:</label>
          <textarea name="notes" placeholder="Enter any notes..."></textarea>
        `;
        container.appendChild(div);
      });
    }

    function setValveStatus(button, status) {
      const container = button.closest('.valve-buttons');
      container.querySelector('input[type=hidden]').value = status;
      container.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
    }

    function toggleLeakDetails(select) {
      const details = select.closest('.well-entry').querySelector('.leak-details');
      details.style.display = select.value === "Yes" ? "block" : "none";
    }

    function submitForm() {
      alert("Annual inspection submitted! (Data handling coming soon)");
    }
  </script>
</body>
</html>
