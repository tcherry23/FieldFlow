<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Pressure Log</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1, h2 { text-align: center; }
    .field-select, .goal, .summary { text-align: center; margin: 10px 0; }
    .well-container { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
    label { display: inline-block; width: 150px; }
    input[type="number"], input[type="text"] { width: 100px; margin: 5px; }
    .note-box { width: 100%; height: 40px; }
    .status-indicator { font-weight: bold; margin-left: 10px; }
    .green { color: green; }
    .yellow { color: orange; }
    .red { color: red; }
    .button-bar { text-align: center; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Daily Pressure Log</h1>

  <div class="field-select">
    <label for="field">Select Field:</label>
    <select id="field" onchange="populateWells()">
      <option value="">--Select Field--</option>
      <option value="Dixon">Dixon</option>
      <option value="Simpson Chapel">Simpson Chapel</option>
      <option value="Mineral City">Mineral City</option>
    </select>
  </div>

  <div class="goal">
    <label for="dailyGoal">Daily MCF Goal:</label>
    <input type="number" id="dailyGoal" placeholder="Enter MCF goal" onchange="updateTotals()" />
  </div>

  <div id="wellsSection"></div>

  <div class="summary">
    <h2>Total MCF/Hour: <span id="totalMCF">0</span></h2>
    <div id="goalStatus" class="status-indicator"></div>
  </div>

  <div class="button-bar">
    <button onclick="goHome()">Home</button>
    <button onclick="submitData()">Submit</button>
  </div>

  <script>
    const fields = {
      "Dixon": {
        wells: {
          "Evans 10": 1.0000, "Evans 5": 1.2500, "Evans 4-H": 1.0000,
          "Cory 8": 1.0000, "Cory 4": 1.0000, "Cory 2": 1.0000,
          "Cory 7": 1.0000, "Cory 3": 1.0000, "Cory 6": 1.0000,
          "Cory 5": 1.0000, "Cory 1": 1.0000
        }
      },
      "Simpson Chapel": {
        wells: {
          "Blaker 1": 0.5000, "Emery 2": 0.7500, "Emery 1": 0.7500,
          "Crays 8": 1.0000, "Crays 1": 0.5000, "Crays 5": 0.7500,
          "Crays 4": 0.2500, "Crays 3": 0.7500, "Crays 7": 1.0000,
          "Crays 2": 1.0000, "Crays 6": 1.0000, "Royal 6": 0.6250,
          "Royal 5": 0.5000, "Royal 4": 0.5000, "Royal 7": 1.0000,
          "Royal 1": 0.5000
        }
      },
      "Mineral City": {
        wells: {
          "Rollison 4": 0.7500, "Rollison 1": 0.7500, "Rollison 2": 0.7500,
          "G. Axe 6": 1.0000, "Haines 4": 0.3750, "Haines 1": 1.0000,
          "Haines 2": 1.0000, "Haines 3": 1.0000, "G. Axe 1": 1.0000,
          "Allen 1": 1.0000, "G. Axe 2": 0.7500, "G. Axe 4": 0.7500,
          "G. Axe 5": 1.0000, "G. Axe 3": 0.5000, "J. Axe 1": 1.0000
        }
      }
    };

    function populateWells() {
      const section = document.getElementById('wellsSection');
      section.innerHTML = '';
      const field = document.getElementById('field').value;
      if (!field || !fields[field]) return;

      Object.entries(fields[field].wells).forEach(([well, orifice]) => {
        const container = document.createElement('div');
        container.className = 'well-container';
        container.innerHTML = `
          <h3>${well}</h3>
          <label>Date:</label><input type="text" class="date" value="${new Date().toLocaleDateString()}" readonly>
          <label>Time:</label><input type="text" class="time" value="${new Date().toLocaleTimeString()}" readonly><br>
          <label>Orifice Size:</label><input type="number" value="${orifice}" class="orifice" readonly><br>
          <label>Upstream PSI:</label><input type="number" class="upstream" onchange="calculateMCF(this)">
          <label>Downstream PSI:</label><input type="number" class="downstream" onchange="calculateMCF(this)"><br>
          <label>d/p Hâ‚‚O:</label><input type="text" class="dpH2O" readonly>
          <label>MCF/Hour:</label><input type="text" class="mcfHour" readonly>
          <span class="status-indicator"></span><br>
          <label>Notes:</label><br><textarea class="note-box"></textarea>
        `;
        section.appendChild(container);
      });
    }

    function calculateMCF(el) {
      const container = el.closest('.well-container');
      const upstream = parseFloat(container.querySelector('.upstream').value) || 0;
      const downstream = parseFloat(container.querySelector('.downstream').value) || 0;
      const orifice = parseFloat(container.querySelector('.orifice').value) || 1;
      const fieldPressure = upstream; // Assume upstream as field pressure for calc
      const dpH2O = (upstream - downstream) * 27.7;
      container.querySelector('.dpH2O').value = dpH2O.toFixed(2);
      const mcfHour = 0.2628 * Math.pow(orifice, 2) * Math.sqrt(Math.max(fieldPressure * dpH2O, 0));
      container.querySelector('.mcfHour').value = mcfHour.toFixed(2);

      updateTotals();
    }

    function updateTotals() {
      const mcfFields = document.querySelectorAll('.mcfHour');
      let total = 0;
      mcfFields.forEach(f => total += parseFloat(f.value) || 0);
      document.getElementById('totalMCF').textContent = total.toFixed(2);

      const goal = parseFloat(document.getElementById('dailyGoal').value) || 0;
      const status = document.getElementById('goalStatus');
      if (!goal) {
        status.textContent = '';
      } else if (total >= goal) {
        status.textContent = 'On Track';
        status.className = 'status-indicator green';
      } else if (total >= goal * 0.75) {
        status.textContent = 'Slightly Below Target';
        status.className = 'status-indicator yellow';
      } else {
        status.textContent = 'Too Low';
        status.className = 'status-indicator red';
      }
    }

    function goHome() {
      window.location.href = "index.html";
    }

    function submitData() {
      alert("Data submitted (feature coming soon).");
    }
  </script>
</body>
</html>
