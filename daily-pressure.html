<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Pressure Log</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .well-entry {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 6px;
    }
    .status {
      font-weight: bold;
    }
    .status.green { color: green; }
    .status.yellow { color: orange; }
    .status.red { color: red; }
  </style>
</head>
<body>
  <h1>Daily Pressure Log</h1>
  <form id="pressureForm">
    <label for="attendant">Attendant:</label>
    <select id="attendant" name="attendant">
      <option value="T. Cherry">T. Cherry</option>
      <option value="T. Ressler">T. Ressler</option>
    </select><br><br>

    <label for="fieldSelect">Select Field:</label>
    <select id="fieldSelect">
      <option value="">-- Select Field --</option>
      <option value="Dixon">Dixon</option>
      <option value="Simpson Chapel">Simpson Chapel</option>
      <option value="Mineral City">Mineral City</option>
    </select><br><br>

    <label for="mcfTarget">Daily MCF Target:</label>
    <input type="number" id="mcfTarget" placeholder="Enter target"><br><br>

    <strong>Total MCF: <span id="totalMCF">0</span></strong>
    <div id="wellsContainer"></div>
  </form>

  <script>
    const fields = {
      "Dixon": {
        wells: [
          { name: "Evans 7", orifice: 1.0000 },
          { name: "Evans 8", orifice: 1.0000 },
          { name: "Evans 3", orifice: 1.0000 },
          { name: "Evans 10", orifice: 1.0000 },
          { name: "Evans 5", orifice: 1.2500 },
          { name: "Evans 4-H", orifice: 1.0000 },
          { name: "Evans 6", orifice: 1.0000 },
          { name: "Cory 8", orifice: 1.0000 },
          { name: "Cory 4", orifice: 1.0000 },
          { name: "Cory 2", orifice: 1.0000 },
          { name: "Cory 7", orifice: 1.0000 },
          { name: "Cory 3", orifice: 1.0000 },
          { name: "Cory 6", orifice: 1.0000 },
          { name: "Cory 5", orifice: 1.0000 },
          { name: "Cory 1", orifice: 1.0000 }
        ]
      },
      "Simpson Chapel": {
        wells: [
          { name: "Blaker 1", orifice: 0.5000 },
          { name: "Emery 2", orifice: 0.7500 },
          { name: "Emery 1", orifice: 0.7500 },
          { name: "Crays 8", orifice: 1.0000 },
          { name: "Crays 1", orifice: 0.5000 },
          { name: "Crays 5", orifice: 0.7500 },
          { name: "Crays 4", orifice: 0.2500 },
          { name: "Crays 3", orifice: 0.7500 },
          { name: "Crays 7", orifice: 1.0000 },
          { name: "Crays 2", orifice: 1.0000 },
          { name: "Crays 6", orifice: 1.0000 },
          { name: "Royal 6", orifice: 0.6250 },
          { name: "Royal 5", orifice: 0.5000 },
          { name: "Royal 4", orifice: 0.5000 },
          { name: "Royal 7", orifice: 1.0000 },
          { name: "Royal 1", orifice: 0.5000 }
        ]
      },
      "Mineral City": {
        wells: [
          { name: "Rollison 4", orifice: 0.7500 },
          { name: "Rollison 1", orifice: 0.7500 },
          { name: "Rollison 2", orifice: 0.7500 },
          { name: "G. Axe 6", orifice: 1.0000 },
          { name: "Haines 4", orifice: 0.3750 },
          { name: "Haines 1", orifice: 1.0000 },
          { name: "Haines 2", orifice: 1.0000 },
          { name: "Haines 3", orifice: 1.0000 },
          { name: "G. Axe 1", orifice: 1.0000 },
          { name: "Allen 1", orifice: 1.0000 },
          { name: "G. Axe 2", orifice: 0.7500 },
          { name: "G. Axe 4", orifice: 0.7500 },
          { name: "G. Axe 5", orifice: 1.0000 },
          { name: "G. Axe 3", orifice: 0.5000 },
          { name: "J. Axe 1", orifice: 1.0000 }
        ]
      }
    };

    const fieldSelect = document.getElementById('fieldSelect');
    const wellsContainer = document.getElementById('wellsContainer');
    const totalMCF = document.getElementById('totalMCF');
    const mcfTargetInput = document.getElementById('mcfTarget');

    fieldSelect.addEventListener('change', () => {
      const field = fieldSelect.value;
      wellsContainer.innerHTML = '';
      let total = 0;

      if (fields[field]) {
        fields[field].wells.forEach((well, index) => {
          const id = `well${index}`;
          const container = document.createElement('div');
          container.className = 'well-entry';

          const date = new Date().toLocaleDateString();

          container.innerHTML = `
            <strong>${well.name}</strong> (${date})<br>
            Orifice: ${well.orifice}<br>
            Upstream: <input type="number" id="${id}_up" placeholder="Upstream"> psi<br>
            Downstream: <input type="number" id="${id}_down" placeholder="Downstream"> psi<br>
            Notes: <input type="text" id="${id}_note" placeholder="Optional notes"><br>
            d/p H₂O: <span id="${id}_dp">-</span><br>
            MCF/hr: <span id="${id}_mcf">-</span>
            <span id="${id}_status" class="status"></span>
            <br><br>
          `;

          wellsContainer.appendChild(container);

          const up = container.querySelector(`#${id}_up`);
          const down = container.querySelector(`#${id}_down`);

          const calculate = () => {
            const u = parseFloat(up.value);
            const d = parseFloat(down.value);
            if (!isNaN(u) && !isNaN(d)) {
              const diff = (u - d) * 27.7;
              const mcf = 0.2628 * Math.pow(well.orifice, 2) * Math.sqrt(u * diff);
              container.querySelector(`#${id}_dp`).innerText = diff.toFixed(2);
              container.querySelector(`#${id}_mcf`).innerText = mcf.toFixed(2);
              total = Array.from(document.querySelectorAll('[id$="_mcf"]'))
                .map(e => parseFloat(e.innerText) || 0).reduce((a, b) => a + b, 0);
              totalMCF.innerText = total.toFixed(2);

              // Status icon
              const target = parseFloat(mcfTargetInput.value);
              const statusSpan = document.getElementById(`${id}_status`);
              if (!isNaN(target)) {
                if (mcf >= target) {
                  statusSpan.textContent = " ✓";
                  statusSpan.className = "status green";
                } else if (mcf >= target * 0.75) {
                  statusSpan.textContent = " ⚠";
                  statusSpan.className = "status yellow";
                } else {
                  statusSpan.textContent = " ↓";
                  statusSpan.className = "status red";
                }
              } else {
                statusSpan.textContent = "";
              }
            }
          };

          up.addEventListener('input', calculate);
          down.addEventListener('input', calculate);
          mcfTargetInput.addEventListener('input', calculate);
        });
      }
    });
  </script>
</body>
</html>
