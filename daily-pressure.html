<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Pressure Log</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h2 {
      margin-bottom: 10px;
    }
    select, input {
      margin: 5px;
      padding: 5px;
    }
    .well {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
    }
    .status {
      font-weight: bold;
      margin-top: 5px;
    }
    .green { color: green; }
    .yellow { color: orange; }
    .red { color: red; }
  </style>
</head>
<body>

  <h2>Daily Pressure Log</h2>

  <label for="attendant">Attendant:</label>
  <select id="attendant">
    <option value="T. Cherry">T. Cherry</option>
    <option value="T. Ressler">T. Ressler</option>
  </select>

  <br><br>

  <label for="targetMCF">Target MCF/Hour:</label>
  <input type="number" id="targetMCF" value="0" onchange="updateAllMCF()">

  <p><strong>Total MCF/Hour:</strong> <span id="totalMCF">0</span></p>

  <label for="field">Select Field:</label>
  <select id="field" onchange="renderWells()">
    <option value="Dixon">Dixon</option>
    <option value="Simpson Chapel">Simpson Chapel</option>
    <option value="Mineral City">Mineral City</option>
  </select>

  <div id="wellContainer"></div>

  <script>
    const orificeSizes = {
      // Dixon
      "Evans 7": 1.0000, "Evans 8": 1.0000, "Evans 3": 1.0000, "Evans 10": 1.0000,
      "Evans 5": 1.2500, "Evans 4-H": 1.0000, "Evans 6": 1.0000,
      "Cory 8": 1.0000, "Cory 4": 1.0000, "Cory 2": 1.0000, "Cory 7": 1.0000,
      "Cory 3": 1.0000, "Cory 6": 1.0000, "Cory 5": 1.0000, "Cory 1": 1.0000,

      // Simpson Chapel
      "Blaker 1": 0.5, "Emery 2": 0.75, "Emery 1": 0.75, "Crays 8": 1.0,
      "Crays 1": 0.5, "Crays 5": 0.75, "Crays 4": 0.25, "Crays 3": 0.75,
      "Crays 7": 1.0, "Crays 2": 1.0, "Crays 6": 1.0, "Royal 6": 0.625,
      "Royal 5": 0.5, "Royal 4": 0.5, "Royal 7": 1.0, "Royal 1": 0.5,

      // Mineral City
      "Rollison 4": 0.75, "Rollison 1": 0.75, "Rollison 2": 0.75, "G. Axe 6": 1.0,
      "Haines 4": 0.375, "Haines 1": 1.0, "Haines 2": 1.0, "Haines 3": 1.0,
      "G. Axe 1": 1.0, "Allen 1": 1.0, "G. Axe 2": 0.75, "G. Axe 4": 0.75,
      "G. Axe 5": 1.0, "G. Axe 3": 0.5, "J. Axe 1": 1.0
    };

    const fields = {
      "Dixon": [
        "Evans 7", "Evans 8", "Evans 3", "Evans 10", "Evans 5", "Evans 4-H",
        "Evans 6", "Cory 8", "Cory 4", "Cory 2", "Cory 7", "Cory 3", "Cory 6",
        "Cory 5", "Cory 1"
      ],
      "Simpson Chapel": [
        "Blaker 1", "Emery 2", "Emery 1", "Crays 8", "Crays 1", "Crays 5",
        "Crays 4", "Crays 3", "Crays 7", "Crays 2", "Crays 6", "Royal 6",
        "Royal 5", "Royal 4", "Royal 7", "Royal 1"
      ],
      "Mineral City": [
        "Rollison 4", "Rollison 1", "Rollison 2", "G. Axe 6", "Haines 4", "Haines 1",
        "Haines 2", "Haines 3", "G. Axe 1", "Allen 1", "G. Axe 2", "G. Axe 4",
        "G. Axe 5", "G. Axe 3", "J. Axe 1"
      ]
    };

    function renderWells() {
      const selectedField = document.getElementById("field").value;
      const wells = fields[selectedField];
      const container = document.getElementById("wellContainer");
      container.innerHTML = '';
      wells.forEach(well => {
        const orifice = orificeSizes[well] || 1.0;
        const wellDiv = document.createElement('div');
        wellDiv.className = 'well';
        wellDiv.innerHTML = `
          <h3>${well}</h3>
          <label>Date:</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}"><br>
          <label>Upstream PSI:</label>
          <input type="number" step="0.01" class="up"><br>
          <label>Downstream PSI:</label>
          <input type="number" step="0.01" class="down"><br>
          <label>Differential PSI:</label>
          <input type="number" step="0.01" class="diff" readonly><br>
          <label>d/p H‚ÇÇO:</label>
          <input type="number" step="0.01" class="dp" readonly><br>
          <label>MCF/Hour:</label>
          <input type="number" step="0.01" class="mcf" readonly><br>
          <div class="status" id="${well}-status"></div>
          <label>Notes:</label>
          <input type="text" placeholder="Optional notes"><br>
        `;
        container.appendChild(wellDiv);
      });
      attachListeners();
    }

    function attachListeners() {
      document.querySelectorAll('.well').forEach(wellDiv => {
        const up = wellDiv.querySelector('.up');
        const down = wellDiv.querySelector('.down');
        up.addEventListener('input', () => calc(wellDiv));
        down.addEventListener('input', () => calc(wellDiv));
      });
    }

    function calc(wellDiv) {
      const up = parseFloat(wellDiv.querySelector('.up').value) || 0;
      const down = parseFloat(wellDiv.querySelector('.down').value) || 0;
      const diff = up - down;
      const dpH2O = diff * 27.7;
      wellDiv.querySelector('.diff').value = diff.toFixed(2);
      wellDiv.querySelector('.dp').value = dpH2O.toFixed(2);

      const wellName = wellDiv.querySelector('h3').innerText;
      const orifice = orificeSizes[wellName] || 1.0;
      const mcf = 0.2628 * (orifice ** 2) * Math.sqrt((dpH2O * up) || 0);
      wellDiv.querySelector('.mcf').value = mcf.toFixed(2);

      updateTotals();
    }

    function updateTotals() {
      let total = 0;
      document.querySelectorAll('.mcf').forEach(input => {
        total += parseFloat(input.value) || 0;
      });
      document.getElementById('totalMCF').innerText = total.toFixed(2);

      const goal = parseFloat(document.getElementById('targetMCF').value) || 0;
      document.querySelectorAll('.well').forEach(wellDiv => {
        const mcf = parseFloat(wellDiv.querySelector('.mcf').value) || 0;
        const statusEl = wellDiv.querySelector('.status');
        if (goal === 0) {
          statusEl.innerText = '';
        } else if (mcf >= goal) {
          statusEl.innerText = "‚úÖ On Target";
          statusEl.className = "status green";
        } else if (mcf >= goal * 0.75) {
          statusEl.innerText = "‚ö†Ô∏è Below Target";
          statusEl.className = "status yellow";
        } else {
          statusEl.innerText = "üîª Way Below Target";
          statusEl.className = "status red";
        }
      });
    }

    // Initial render
    renderWells();
  </script>

</body>
</html>
