<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Pressure Log - Dixon</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f1f1f1;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .field-container {
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 10px;
    }
    label {
      display: block;
      margin-top: 5px;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 3px;
      margin-bottom: 10px;
    }
    .status {
      font-weight: bold;
      padding: 5px;
      border-radius: 5px;
      display: inline-block;
      margin-top: 5px;
    }
    .status.green { color: green; }
    .status.yellow { color: orange; }
    .status.red { color: red; }
    .home-button {
      display: block;
      width: 100%;
      padding: 10px;
      text-align: center;
      background: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      margin-top: 20px;
    }
    .top-box {
      background: #fff;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <h1>Daily Pressure Log - Dixon</h1>

  <div class="top-box">
    <label for="date">Date:</label>
    <input type="text" id="date" readonly />

    <label for="target">Daily MCF Target:</label>
    <input type="number" id="target" placeholder="Enter target MCF" />
    <p><strong>Total MCF Recorded:</strong> <span id="total-mcf">0</span></p>
  </div>

  <div id="wellContainer"></div>

  <a class="home-button" href="index.html">üè† Home</a>

  <script>
    const wells = [
      "Evans 10", "Evans 5", "Evan 4-H",
      "Cory 8", "Cory 4", "Cory 2", "Cory 7",
      "Cory 3", "Cory 6", "Cory 5", "Cory 1"
    ];

    const C = 10;
    const orifice = 1; // 1 inch

    const container = document.getElementById("wellContainer");

    wells.forEach(well => {
      const div = document.createElement("div");
      div.className = "field-container";

      div.innerHTML = `
        <h3>${well}</h3>
        <label>Time:</label>
        <input type="time" class="time" />

        <label>Orifice Size (inch):</label>
        <input type="text" class="orifice" value="${orifice}" readonly />

        <label>Upstream Pressure (psi):</label>
        <input type="number" class="up" />

        <label>Downstream Pressure (psi):</label>
        <input type="number" class="down" />

        <label>Differential Pressure (ŒîP):</label>
        <input type="number" class="diff" readonly />

        <label>MCF/hour:</label>
        <input type="number" class="mcf" readonly />

        <div class="status"></div>
        <label>Notes:</label>
        <input type="text" class="notes" />
      `;

      container.appendChild(div);
    });

    function updateFields() {
      const entries = document.querySelectorAll(".field-container");
      let total = 0;
      const target = parseFloat(document.getElementById("target").value);

      entries.forEach(entry => {
        const up = entry.querySelector(".up");
        const down = entry.querySelector(".down");
        const diff = entry.querySelector(".diff");
        const mcf = entry.querySelector(".mcf");
        const status = entry.querySelector(".status");

        const upVal = parseFloat(up.value);
        const downVal = parseFloat(down.value);

        if (!isNaN(upVal) && !isNaN(downVal)) {
          const delta = upVal - downVal;
          diff.value = delta.toFixed(2);

          const calcMCF = C * Math.sqrt(delta);
          mcf.value = isNaN(calcMCF) ? "" : calcMCF.toFixed(2);
          total += calcMCF;

          if (!isNaN(target)) {
            const pct = (calcMCF / target) * 100;
            if (pct >= 100) {
              status.textContent = "On Target";
              status.className = "status green";
            } else if (pct >= 70) {
              status.textContent = "Below Target";
              status.className = "status yellow";
            } else {
              status.textContent = "Too Low";
              status.className = "status red";
            }
          } else {
            status.textContent = "";
            status.className = "status";
          }
        } else {
          diff.value = "";
          mcf.value = "";
          status.textContent = "";
          status.className = "status";
        }
      });

      document.getElementById("total-mcf").textContent = total.toFixed(2);
    }

    document.getElementById("target").addEventListener("input", updateFields);
    container.addEventListener("input", updateFields);

    document.getElementById("date").value = new Date().toLocaleDateString();
  </script>
</body>
</html>
