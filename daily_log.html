<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Pressure Log</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f7f7f7; }
    h2, h3 { color: #333; }
    select, input[type="text"], input[type="number"], input[type="datetime-local"], button {
      padding: 5px;
      margin: 4px;
    }
    .well-section {
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    .green { background-color: #d4edda; }
    .yellow { background-color: #fff3cd; }
    .red { background-color: #f8d7da; }
    .home-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Daily Pressure Log</h2>

  <label for="dailyTarget">Daily MCF Target:</label>
  <input type="number" id="dailyTarget" placeholder="Enter MCF goal">

  <h3>Select Field:</h3>
  <select id="fieldSelector" onchange="renderWells()">
    <option value="Dixon">Dixon</option>
    <option value="Simpson">Simpson Chapel</option>
    <option value="Mineral">Mineral City</option>
  </select>

  <div id="wellsContainer"></div>

  <h3>Total MCF: <span id="totalMcf">0</span></h3>

  <button class="home-button" onclick="location.href='index.html'">Home</button>

  <script>
    const wells = {
      Dixon: ["Evans 10", "Evans 5", "Evan 4-H", "Cory 8", "Cory 4", "Cory 2", "Cory 7", "Cory 3", "Cory 6", "Cory 5", "Cory 1"],
      Simpson: ["Blaker 1", "Emery 2", "Emery 1", "Crays 8", "Crays 5", "Crays 4", "Crays 3", "Crays 7", "Crays 2", "Crays 6", "Royal 6", "Royal 5", "Royal 4", "Royal 7", "Royal 1"],
      Mineral: {
        "Haines 1": 0.875, "Haines 2": 0.875, "Haines 3": 0.875, "Haines 4": 0.875,
        "G. Axe 1": 1, "G. Axe 2": 1, "G. Axe 3": 1, "G. Axe 4": 1, "G. Axe 5": 1, "G. Axe 6": 1,
        "J. Axe 1": 0.75,
        "Rollison 1": 0.75, "Rollison 2": 0.75, "Rollison 3": 0.75, "Rollison 4": 0.75,
        "Headley 1": 0.75
      }
    };

    function renderWells() {
      const field = document.getElementById("fieldSelector").value;
      const container = document.getElementById("wellsContainer");
      container.innerHTML = "";

      let fieldWells = Array.isArray(wells[field]) ? wells[field] : Object.keys(wells[field]);

      fieldWells.forEach(well => {
        const orificeSize = typeof wells[field] === 'object' ? wells[field][well] : 1;
        const section = document.createElement("div");
        section.className = "well-section";
        section.innerHTML = `
          <h4>${well}</h4>
          <label>Date/Time:</label>
          <input type="datetime-local" onchange="updateMcf()" class="datetime">
          <label>Orifice Size (in):</label>
          <input type="number" value="${orificeSize}" class="orifice">
          <label>Upstream PSI:</label>
          <input type="number" class="upstream">
          <label>Downstream PSI:</label>
          <input type="number" class="downstream">
          <label>Differential:</label>
          <input type="number" class="differential" readonly>
          <label>d/p Hâ‚‚O:</label>
          <input type="number" class="h2o" readonly>
          <label>MCF/Hour:</label>
          <input type="number" class="mcf" readonly>
          <label>Notes:</label>
          <input type="text" class="notes">
        `;
        container.appendChild(section);
      });

      document.querySelectorAll(".upstream, .downstream").forEach(input => {
        input.addEventListener("input", updateMcf);
      });
    }

    function updateMcf() {
      let totalMcf = 0;
      const target = parseFloat(document.getElementById("dailyTarget").value || 0);
      const sections = document.querySelectorAll(".well-section");

      sections.forEach(section => {
        const orifice = parseFloat(section.querySelector(".orifice").value || 0);
        const up = parseFloat(section.querySelector(".upstream").value || 0);
        const down = parseFloat(section.querySelector(".downstream").value || 0);
        const differential = up - down;
        const h2o = differential * 27.7;
        const mcf = 0.2628 * (orifice ** 2) * Math.sqrt(up * h2o);

        section.querySelector(".differential").value = differential.toFixed(2);
        section.querySelector(".h2o").value = h2o.toFixed(2);
        section.querySelector(".mcf").value = isNaN(mcf) ? "" : mcf.toFixed(2);

        section.classList.remove("green", "yellow", "red");
        if (!isNaN(mcf)) {
          totalMcf += mcf;
          if (mcf >= (target / sections.length)) {
            section.classList.add("green");
          } else if (mcf >= (target / sections.length) * 0.7) {
            section.classList.add("yellow");
          } else {
            section.classList.add("red");
          }
        }
      });

      document.getElementById("totalMcf").textContent = totalMcf.toFixed(2);
    }

    // Load default field on first load
    window.onload = renderWells;
  </script>
</body>
</html>
